<!DOCTYPE html>
<html>
<head>
    <title>å•æœºæ¨¡å¼ - Buckshot Roulette</title>
    <style>
        body { 
            font-family: Arial; 
            background: #222; 
            color: white; 
            padding: 20px;
        }
        .game-container {
            max-width: 400px;
            margin: 0 auto;
        }
        .player {
            margin: 20px 0;
            padding: 15px;
            border: 2px solid #e74c3c;
            border-radius: 10px;
        }
        button {
            padding: 10px 15px;
            margin: 5px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 5px;
        }
        #message {
            margin: 15px 0;
            padding: 10px;
            background: #333;
            min-height: 20px;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1>ğŸ”« å•æœºæ¨¡å¼</h1>
        <button onclick="location.href='index.html'">â† è¿”å›ä¸»èœå•</button>
        
        <div class="player">
            <h3>ç©å®¶: <span id="playerHP">5</span> â¤ï¸</h3>
            <button onclick="shootSelf()">å¯¹è‡ªå·±å¼€æª</button>
            <button onclick="shootEnemy()">å¯¹æ•Œäººå¼€æª</button>
        </div>
        
        <div class="player">
            <h3>æ•Œäºº: <span id="enemyHP">5</span> â¤ï¸</h3>
        </div>
        
        <div id="message">æ¸¸æˆå¼€å§‹ï¼è½®åˆ°ä½ è¡ŒåŠ¨ã€‚</div>
        <div>å½“å‰å­å¼¹: <span id="currentBullet">???</span></div>
    </div>

    <script>
        // ç®€å•çš„å•æœºç‰ˆæ¸¸æˆé€»è¾‘
        let playerHP = 5;
        let enemyHP = 5;
        let shotgun = ['live', 'blank', 'blank', 'live', 'blank'];
        let currentChamber = 0;
        let playerTurn = true;

        function updateUI() {
            document.getElementById('playerHP').textContent = playerHP;
            document.getElementById('enemyHP').textContent = enemyHP;
        }

        function nextTurn() {
            playerTurn = !playerTurn;
            const message = document.getElementById('message');
            if(playerTurn) {
                message.textContent = 'è½®åˆ°ä½ è¡ŒåŠ¨';
            } else {
                message.textContent = 'æ•Œäººæ€è€ƒä¸­...';
                setTimeout(enemyTurn, 1500);
            }
        }

        function shootSelf() {
            if(!playerTurn) return;
            
            const bullet = shotgun[currentChamber];
            document.getElementById('currentBullet').textContent = bullet;
            
            if(bullet === 'blank') {
                document.getElementById('message').textContent = 'ç©ºåŒ…å¼¹ï¼å®‰å…¨ï¼Œä½ ç»§ç»­è¡ŒåŠ¨ï¼';
            } else {
                playerHP--;
                document.getElementById('message').textContent = 'å®å¼¹ï¼ä½ å—ä¼¤äº†ï¼';
                if(playerHP <= 0) gameOver('æ•Œäºº');
            }
            
            currentChamber++;
            if(currentChamber >= shotgun.length) reloadGun();
            if(bullet === 'live') nextTurn();
            updateUI();
        }

        function shootEnemy() {
            if(!playerTurn) return;
            
            const bullet = shotgun[currentChamber];
            document.getElementById('currentBullet').textContent = bullet;
            
            if(bullet === 'blank') {
                document.getElementById('message').textContent = 'ç©ºåŒ…å¼¹ï¼æ•Œäººå®‰å…¨ï¼';
            } else {
                enemyHP--;
                document.getElementById('message').textContent = 'å®å¼¹ï¼æ•Œäººå—ä¼¤äº†ï¼';
                if(enemyHP <= 0) gameOver('ç©å®¶');
            }
            
            currentChamber++;
            if(currentChamber >= shotgun.length) reloadGun();
            nextTurn();
            updateUI();
        }

        function enemyTurn() {
            // AIç®€å•é€»è¾‘ï¼š50%æ¦‚ç‡å¯¹è‡ªå·±å¼€æª
            if(Math.random() > 0.5 && shotgun[currentChamber] === 'blank') {
                shootSelf();
            } else {
                shootEnemy();
            }
        }

        function reloadGun() {
            // ç®€åŒ–ç‰ˆé‡æ–°è£…å¼¹
            shotgun = ['live', 'blank', 'blank', 'live', 'blank'].sort(() => Math.random() - 0.5);
            currentChamber = 0;
        }

        function gameOver(winner) {
            alert(`æ¸¸æˆç»“æŸï¼${winner}èƒœåˆ©ï¼`);
            location.reload();
        }

        // åˆå§‹åŒ–æ¸¸æˆ
        reloadGun();
        updateUI();
    </script>
</body>
</html>
